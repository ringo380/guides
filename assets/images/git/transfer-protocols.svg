<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <marker id="arrow-light" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#9e9e9e"/>
    </marker>
    <marker id="arrow-dark" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#666"/>
    </marker>
  </defs>
  <style>
    .title { font-size: 11px; font-weight: 600; fill: #1a1a1a; }
    .label { font-size: 10px; fill: #555; }
    .code { font-size: 10px; fill: #1a1a1a; font-family: "SFMono-Regular", "Consolas", "Liberation Mono", monospace; }
    .box { fill: #f5f5f5; stroke: #ccc; stroke-width: 1; rx: 8; }
    .box-accent { fill: #f5f5f5; stroke: #009485; stroke-width: 1.5; rx: 8; }
    .box-warn { fill: #f5f5f5; stroke: #e65100; stroke-width: 1.5; rx: 8; }
    .heading { font-size: 13px; font-weight: 700; fill: #009485; }
    .connector { stroke: #9e9e9e; stroke-width: 1.2; fill: none; marker-end: url(#arrow-light); }
    .divider { stroke: #ccc; stroke-width: 1; stroke-dasharray: 4,3; }
    .section-rule { stroke: #009485; stroke-width: 1; opacity: 0.3; }
    .row-label { font-size: 10px; font-weight: 600; fill: #1a1a1a; }
    .row-bg-even { fill: rgba(0,0,0,0.02); }
    .badge-rec { fill: #009485; rx: 4; }
    .badge-dep { fill: #e65100; rx: 4; }
    .badge-leg { fill: #9e9e9e; rx: 4; }
    .badge-text { font-size: 9px; font-weight: 600; fill: #fff; }
    .check { font-size: 10px; font-weight: 700; fill: #009485; }
    .cross { font-size: 10px; font-weight: 700; fill: #9e9e9e; }

    @media (prefers-color-scheme: dark) {
      .title { fill: #e0e0e0; }
      .label { fill: #aaa; }
      .code { fill: #e0e0e0; }
      .box { fill: rgba(255,255,255,0.07); stroke: rgba(255,255,255,0.15); }
      .box-accent { fill: rgba(255,255,255,0.07); stroke: #4db6ac; }
      .box-warn { fill: rgba(255,255,255,0.07); stroke: #ff9800; }
      .heading { fill: #4db6ac; }
      .connector { stroke: #666; marker-end: url(#arrow-dark); }
      .divider { stroke: rgba(255,255,255,0.15); }
      .section-rule { stroke: #4db6ac; }
      .row-label { fill: #e0e0e0; }
      .row-bg-even { fill: rgba(255,255,255,0.03); }
      .badge-rec { fill: #4db6ac; }
      .badge-dep { fill: #ff9800; }
      .badge-leg { fill: #666; }
      .badge-text { fill: #1a1a1a; }
      .check { fill: #4db6ac; }
      .cross { fill: #666; }
    }
  </style>

  <!-- Main heading -->
  <text x="400" y="22" text-anchor="middle" class="heading">Git Transfer Protocol Comparison</text>

  <!-- ==================== COLUMN HEADERS ==================== -->
  <!-- Row label column: x=15..120 (105px)
       Col 1 (SSH):          x=125..290 (165px), center=207
       Col 2 (Smart HTTP):   x=295..460 (165px), center=377
       Col 3 (Dumb HTTP):    x=465..630 (165px), center=547
       Col 4 (Git Protocol): x=635..790 (155px), center=712
  -->

  <!-- Protocol header boxes -->
  <rect x="125" y="36" width="165" height="30" class="box-accent"/>
  <text x="207" y="56" text-anchor="middle" class="title">SSH</text>

  <rect x="295" y="36" width="165" height="30" class="box-accent"/>
  <text x="377" y="56" text-anchor="middle" class="title">Smart HTTP</text>

  <rect x="465" y="36" width="165" height="30" class="box-warn"/>
  <text x="547" y="56" text-anchor="middle" class="title">Dumb HTTP</text>

  <rect x="635" y="36" width="155" height="30" class="box-warn"/>
  <text x="712" y="56" text-anchor="middle" class="title">Git Protocol</text>

  <!-- ==================== TABLE ROWS ==================== -->
  <!-- Row heights: 32px each, starting at y=72 -->

  <!-- Row 1: URL Prefix (y=72..104) -->
  <rect x="15" y="72" width="775" height="32" class="row-bg-even" rx="0"/>
  <text x="25" y="93" class="row-label">URL Prefix</text>
  <text x="207" y="93" text-anchor="middle" class="code">git@ / ssh://</text>
  <text x="377" y="93" text-anchor="middle" class="code">https://</text>
  <text x="547" y="93" text-anchor="middle" class="code">http://</text>
  <text x="712" y="93" text-anchor="middle" class="code">git://</text>

  <!-- Row 2: Authentication (y=104..136) -->
  <text x="25" y="125" class="row-label">Authentication</text>
  <text x="207" y="125" text-anchor="middle" class="label">SSH keys</text>
  <text x="377" y="125" text-anchor="middle" class="label">HTTP tokens</text>
  <text x="547" y="125" text-anchor="middle" class="label">None</text>
  <text x="712" y="125" text-anchor="middle" class="label">None</text>

  <!-- Row 3: Encryption (y=136..168) -->
  <rect x="15" y="136" width="775" height="32" class="row-bg-even" rx="0"/>
  <text x="25" y="157" class="row-label">Encryption</text>
  <text x="207" y="157" text-anchor="middle" class="label">Yes (SSH)</text>
  <text x="377" y="157" text-anchor="middle" class="label">Yes (TLS)</text>
  <text x="547" y="157" text-anchor="middle" class="cross">No</text>
  <text x="712" y="157" text-anchor="middle" class="cross">No</text>

  <!-- Row 4: Read/Write (y=168..200) -->
  <text x="25" y="189" class="row-label">Read / Write</text>
  <text x="207" y="189" text-anchor="middle" class="check">Both</text>
  <text x="377" y="189" text-anchor="middle" class="check">Both</text>
  <text x="547" y="189" text-anchor="middle" class="label">Read-only</text>
  <text x="712" y="189" text-anchor="middle" class="label">Read-only</text>

  <!-- Row 5: Pack Negotiation (y=200..232) -->
  <rect x="15" y="200" width="775" height="32" class="row-bg-even" rx="0"/>
  <text x="25" y="221" class="row-label">Pack Negotiation</text>
  <text x="207" y="221" text-anchor="middle" class="check">Yes</text>
  <text x="377" y="221" text-anchor="middle" class="check">Yes</text>
  <text x="547" y="221" text-anchor="middle" class="cross">No</text>
  <text x="712" y="221" text-anchor="middle" class="check">Yes</text>

  <!-- Row 6: Status (y=232..268) -->
  <text x="25" y="255" class="row-label">Status</text>
  <!-- SSH: Recommended -->
  <rect x="167" y="244" width="82" height="18" class="badge-rec"/>
  <text x="208" y="257" text-anchor="middle" class="badge-text">Recommended</text>
  <!-- Smart HTTP: Recommended -->
  <rect x="337" y="244" width="82" height="18" class="badge-rec"/>
  <text x="378" y="257" text-anchor="middle" class="badge-text">Recommended</text>
  <!-- Dumb HTTP: Legacy -->
  <rect x="523" y="244" width="50" height="18" class="badge-leg"/>
  <text x="548" y="257" text-anchor="middle" class="badge-text">Legacy</text>
  <!-- Git Protocol: Deprecated -->
  <rect x="682" y="244" width="64" height="18" class="badge-dep"/>
  <text x="714" y="257" text-anchor="middle" class="badge-text">Deprecated</text>

  <!-- ==================== SEPARATOR ==================== -->
  <line x1="30" y1="285" x2="770" y2="285" class="divider"/>

  <!-- ==================== TRANSFER FLOW ==================== -->
  <text x="400" y="310" text-anchor="middle" class="heading">Smart Transfer Flow (SSH / Smart HTTP / Git Protocol)</text>
  <line x1="180" y1="315" x2="620" y2="315" class="section-rule"/>

  <!-- Step 1: Discovery -->
  <rect x="30" y="335" width="155" height="62" class="box-accent"/>
  <text x="107" y="354" text-anchor="middle" class="title">1. Discovery</text>
  <text x="107" y="370" text-anchor="middle" class="label">Client connects,</text>
  <text x="107" y="383" text-anchor="middle" class="label">server lists refs</text>

  <!-- Arrow 1 to 2 -->
  <line x1="185" y1="366" x2="215" y2="366" class="connector"/>

  <!-- Step 2: Negotiation -->
  <rect x="217" y="335" width="155" height="62" class="box"/>
  <text x="294" y="354" text-anchor="middle" class="title">2. Negotiation</text>
  <text x="294" y="370" text-anchor="middle" class="label">Compare have/want</text>
  <text x="294" y="383" text-anchor="middle" class="label">to find common base</text>

  <!-- Arrow 2 to 3 -->
  <line x1="372" y1="366" x2="402" y2="366" class="connector"/>

  <!-- Step 3: Transfer -->
  <rect x="404" y="335" width="155" height="62" class="box"/>
  <text x="481" y="354" text-anchor="middle" class="title">3. Transfer</text>
  <text x="481" y="370" text-anchor="middle" class="label">Send thin packfile</text>
  <text x="481" y="383" text-anchor="middle" class="label">with delta objects</text>

  <!-- Arrow 3 to 4 -->
  <line x1="559" y1="366" x2="589" y2="366" class="connector"/>

  <!-- Step 4: Update -->
  <rect x="591" y="335" width="175" height="62" class="box-accent"/>
  <text x="678" y="354" text-anchor="middle" class="title">4. Update</text>
  <text x="678" y="370" text-anchor="middle" class="label">Index packfile,</text>
  <text x="678" y="383" text-anchor="middle" class="label">update remote refs</text>

  <!-- ==================== DUMB HTTP NOTE ==================== -->
  <line x1="30" y1="415" x2="770" y2="415" class="divider"/>

  <text x="400" y="440" text-anchor="middle" class="heading">Dumb HTTP Transfer (No Negotiation)</text>
  <line x1="220" y1="445" x2="580" y2="445" class="section-rule"/>

  <!-- Step A: Fetch info/refs -->
  <rect x="55" y="460" width="155" height="30" class="box-warn"/>
  <text x="132" y="480" text-anchor="middle" class="code">GET info/refs</text>

  <!-- Arrow A to B -->
  <line x1="210" y1="475" x2="240" y2="475" class="connector"/>

  <!-- Step B: Walk objects -->
  <rect x="242" y="460" width="155" height="30" class="box-warn"/>
  <text x="319" y="480" text-anchor="middle" class="label">Walk object graph</text>

  <!-- Arrow B to C -->
  <line x1="397" y1="475" x2="427" y2="475" class="connector"/>

  <!-- Step C: Fetch loose/packs -->
  <rect x="429" y="460" width="170" height="30" class="box-warn"/>
  <text x="514" y="480" text-anchor="middle" class="code">GET objects / packs</text>

  <!-- Arrow C to D -->
  <line x1="599" y1="475" x2="629" y2="475" class="connector"/>

  <!-- Step D: Update refs -->
  <rect x="631" y="460" width="130" height="30" class="box"/>
  <text x="696" y="480" text-anchor="middle" class="label">Update local refs</text>
</svg>