<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 380" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <marker id="arrow-light" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#9e9e9e"/>
    </marker>
    <marker id="arrow-dark" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#666"/>
    </marker>
  </defs>
  <style>
    .title { font-size: 11px; font-weight: 600; fill: #1a1a1a; }
    .label { font-size: 10px; fill: #555; }
    .code { font-size: 10px; fill: #1a1a1a; font-family: "SFMono-Regular", "Consolas", "Liberation Mono", monospace; }
    .box { fill: #f5f5f5; stroke: #ccc; stroke-width: 1; rx: 8; }
    .box-accent { fill: #f5f5f5; stroke: #009485; stroke-width: 1.5; rx: 8; }
    .diamond { fill: #f5f5f5; stroke: #ccc; stroke-width: 1; }
    .connector { stroke: #9e9e9e; stroke-width: 1.2; fill: none; marker-end: url(#arrow-light); }
    .heading { font-size: 13px; font-weight: 700; fill: #009485; }

    @media (prefers-color-scheme: dark) {
      .title { fill: #e0e0e0; }
      .label { fill: #aaa; }
      .code { fill: #e0e0e0; }
      .box { fill: rgba(255,255,255,0.07); stroke: rgba(255,255,255,0.15); }
      .box-accent { fill: rgba(255,255,255,0.07); stroke: #4db6ac; }
      .diamond { fill: rgba(255,255,255,0.07); stroke: rgba(255,255,255,0.15); }
      .connector { stroke: #666; marker-end: url(#arrow-dark); }
      .heading { fill: #4db6ac; }
    }
  </style>

  <!-- Heading -->
  <text x="340" y="24" text-anchor="middle" class="heading">Which Text Tool?</text>

  <!-- Start box: "What do you need?" -->
  <rect x="30" y="40" width="140" height="34" class="box-accent"/>
  <text x="100" y="61" text-anchor="middle" class="title">What do you need?</text>

  <!-- Connector: start box to diamond 1 -->
  <line x1="100" y1="74" x2="100" y2="90" class="connector"/>

  <!-- Diamond 1: Search text? -->
  <polygon points="100,90 155,118 100,146 45,118" class="diamond"/>
  <text x="100" y="122" text-anchor="middle" class="title">Search text?</text>

  <!-- Yes branch: diamond 1 → grep -->
  <line x1="155" y1="118" x2="220" y2="118" class="connector"/>
  <text x="180" y="112" text-anchor="middle" class="label">Yes</text>
  <rect x="222" y="103" width="70" height="30" class="box-accent"/>
  <text x="257" y="122" text-anchor="middle" class="code">grep</text>

  <!-- No branch: diamond 1 → diamond 2 -->
  <line x1="100" y1="146" x2="100" y2="164" class="connector"/>
  <text x="112" y="158" class="label">No</text>

  <!-- Diamond 2: Transform lines? -->
  <polygon points="100,164 165,192 100,220 35,192" class="diamond"/>
  <text x="100" y="196" text-anchor="middle" class="title">Transform lines?</text>

  <!-- Yes branch: diamond 2 → sed -->
  <line x1="165" y1="192" x2="220" y2="192" class="connector"/>
  <text x="185" y="186" text-anchor="middle" class="label">Yes</text>
  <rect x="222" y="177" width="70" height="30" class="box-accent"/>
  <text x="257" y="196" text-anchor="middle" class="code">sed</text>

  <!-- No branch: diamond 2 → diamond 3 -->
  <line x1="100" y1="220" x2="100" y2="238" class="connector"/>
  <text x="112" y="232" class="label">No</text>

  <!-- Diamond 3: Extract columns? -->
  <polygon points="100,238 168,266 100,294 32,266" class="diamond"/>
  <text x="100" y="270" text-anchor="middle" class="title">Extract columns?</text>

  <!-- Yes branch: diamond 3 → split into Simple / With conditions -->
  <line x1="168" y1="266" x2="220" y2="266" class="connector"/>
  <text x="188" y="260" text-anchor="middle" class="label">Yes</text>

  <!-- Sub-decision box for column extraction -->
  <rect x="222" y="248" width="106" height="36" class="box"/>
  <text x="275" y="270" text-anchor="middle" class="title">How complex?</text>

  <!-- Simple branch → cut -->
  <line x1="328" y1="256" x2="385" y2="244" class="connector"/>
  <text x="350" y="244" class="label">Simple</text>
  <rect x="387" y="229" width="70" height="30" class="box-accent"/>
  <text x="422" y="248" text-anchor="middle" class="code">cut</text>

  <!-- With conditions branch → awk -->
  <line x1="328" y1="276" x2="385" y2="288" class="connector"/>
  <text x="338" y="292" class="label">With conditions</text>
  <rect x="387" y="273" width="70" height="30" class="box-accent"/>
  <text x="422" y="292" text-anchor="middle" class="code">awk</text>

  <!-- No branch: diamond 3 → diamond 4 -->
  <line x1="100" y1="294" x2="100" y2="308" class="connector"/>
  <text x="112" y="304" class="label">No</text>

  <!-- Diamond 4: Translate chars? -->
  <polygon points="100,308 162,333 100,358 38,333" class="diamond"/>
  <text x="100" y="337" text-anchor="middle" class="title">Translate chars?</text>

  <!-- Yes branch: diamond 4 → tr -->
  <line x1="162" y1="333" x2="220" y2="333" class="connector"/>
  <text x="184" y="327" text-anchor="middle" class="label">Yes</text>
  <rect x="222" y="318" width="70" height="30" class="box-accent"/>
  <text x="257" y="337" text-anchor="middle" class="code">tr</text>

  <!-- No branch: diamond 4 → sort + uniq (final) -->
  <!-- Route rightward from diamond 4 bottom, then to the result -->
  <path d="M 100,358 L 100,368 L 510,368 L 510,333 L 540,333" class="connector"/>
  <text x="112" y="370" class="label">Otherwise</text>

  <!-- sort + uniq result box -->
  <rect x="542" y="318" width="110" height="30" class="box-accent"/>
  <text x="597" y="337" text-anchor="middle" class="code">sort + uniq</text>

  <!-- Decorative summary boxes on the right side -->
  <rect x="490" y="50" width="170" height="180" rx="10" fill="none" stroke="#ccc" stroke-width="0.8" stroke-dasharray="4,3" class="box" style="fill:none;"/>
  <text x="575" y="70" text-anchor="middle" class="heading">Tool Summary</text>
  <text x="505" y="92" class="code">grep</text><text x="550" y="92" class="label">- find patterns</text>
  <text x="505" y="112" class="code">sed</text><text x="545" y="112" class="label">- edit streams</text>
  <text x="505" y="132" class="code">cut</text><text x="545" y="132" class="label">- extract fields</text>
  <text x="505" y="152" class="code">awk</text><text x="545" y="152" class="label">- column logic</text>
  <text x="505" y="172" class="code">tr</text><text x="538" y="172" class="label">- char translation</text>
  <text x="505" y="192" class="code">sort</text><text x="548" y="192" class="label">- order lines</text>
  <text x="505" y="212" class="code">uniq</text><text x="548" y="212" class="label">- remove dupes</text>
</svg>
