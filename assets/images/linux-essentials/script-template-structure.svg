<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 480">
  <defs>
    <marker id="arrow-light" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#9e9e9e"/>
    </marker>
    <marker id="arrow-dark" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#666"/>
    </marker>
  </defs>
  <style>
    .title { font-size: 11px; font-weight: 600; fill: #1a1a1a; }
    .label { font-size: 10px; fill: #555; }
    .code { font-size: 10px; fill: #1a1a1a; font-family: "SFMono-Regular", "Consolas", "Liberation Mono", monospace; }
    .box { fill: #f5f5f5; stroke: #ccc; stroke-width: 1; rx: 8; }
    .box-accent { fill: #f5f5f5; stroke: #009485; stroke-width: 1.5; rx: 8; }
    .diamond { fill: #f5f5f5; stroke: #ccc; stroke-width: 1; }
    .connector { stroke: #9e9e9e; stroke-width: 1.2; fill: none; marker-end: url(#arrow-light); }
    .heading { font-size: 13px; font-weight: 700; fill: #009485; }

    @media (prefers-color-scheme: dark) {
      .title { fill: #e0e0e0; }
      .label { fill: #aaa; }
      .code { fill: #e0e0e0; }
      .box { fill: rgba(255,255,255,0.07); stroke: rgba(255,255,255,0.15); }
      .box-accent { fill: rgba(255,255,255,0.07); stroke: #4db6ac; }
      .diamond { fill: rgba(255,255,255,0.07); stroke: rgba(255,255,255,0.15); }
      .connector { stroke: #666; marker-end: url(#arrow-dark); }
      .heading { fill: #4db6ac; }
    }
  </style>

  <!-- Heading -->
  <text x="250" y="22" text-anchor="middle" class="heading">Ideal Script Structure</text>

  <!-- Box 1: shebang + set (accent) -->
  <rect x="130" y="36" width="240" height="36" class="box-accent"/>
  <text x="250" y="52" text-anchor="middle" class="code">#!/bin/bash</text>
  <text x="250" y="65" text-anchor="middle" class="code">set -euo pipefail</text>

  <!-- Arrow -->
  <line x1="250" y1="72" x2="250" y2="84" class="connector"/>

  <!-- Box 2: readonly constants -->
  <rect x="145" y="84" width="210" height="32" class="box"/>
  <text x="250" y="105" text-anchor="middle" class="title"><tspan class="code">readonly</tspan> constants</text>

  <!-- Arrow -->
  <line x1="250" y1="116" x2="250" y2="128" class="connector"/>

  <!-- Box 3: Utility functions -->
  <rect x="130" y="128" width="240" height="32" class="box"/>
  <text x="250" y="148" text-anchor="middle" class="title">Utility functions (<tspan class="code">log</tspan>, <tspan class="code">die</tspan>)</text>

  <!-- Arrow -->
  <line x1="250" y1="160" x2="250" y2="172" class="connector"/>

  <!-- Box 4: cleanup + trap -->
  <rect x="130" y="172" width="240" height="32" class="box"/>
  <text x="250" y="192" text-anchor="middle" class="title"><tspan class="code">cleanup()</tspan> + <tspan class="code">trap EXIT</tspan></text>

  <!-- Arrow -->
  <line x1="250" y1="204" x2="250" y2="216" class="connector"/>

  <!-- Box 5: usage -->
  <rect x="160" y="216" width="180" height="32" class="box"/>
  <text x="250" y="237" text-anchor="middle" class="code">usage()</text>

  <!-- Arrow -->
  <line x1="250" y1="248" x2="250" y2="260" class="connector"/>

  <!-- Box 6: main function -->
  <rect x="155" y="260" width="190" height="32" class="box"/>
  <text x="250" y="281" text-anchor="middle" class="title"><tspan class="code">main()</tspan> function</text>

  <!-- Arrow -->
  <line x1="250" y1="292" x2="250" y2="304" class="connector"/>

  <!-- Box 7: Arg parsing + validation -->
  <rect x="130" y="304" width="240" height="32" class="box"/>
  <text x="250" y="325" text-anchor="middle" class="title">Arg parsing + validation</text>

  <!-- Arrow -->
  <line x1="250" y1="336" x2="250" y2="348" class="connector"/>

  <!-- Box 8: Business logic -->
  <rect x="150" y="348" width="200" height="32" class="box"/>
  <text x="250" y="369" text-anchor="middle" class="title">Business logic</text>

  <!-- Arrow -->
  <line x1="250" y1="380" x2="250" y2="392" class="connector"/>

  <!-- Box 9: main "$@" (accent) -->
  <rect x="160" y="392" width="180" height="32" class="box-accent"/>
  <text x="250" y="413" text-anchor="middle" class="code">main "$@"</text>
</svg>