<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 350" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <marker id="arrow-light" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#9e9e9e"/>
    </marker>
    <marker id="arrow-dark" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#666"/>
    </marker>
  </defs>
  <style>
    /* Light mode */
    .title { font-size: 11px; font-weight: 600; fill: #1a1a1a; }
    .label { font-size: 10px; fill: #555; }
    .code { font-size: 10px; fill: #1a1a1a; font-family: "SFMono-Regular", "Consolas", "Liberation Mono", monospace; }
    .code-muted { font-size: 9.5px; fill: #555; font-family: "SFMono-Regular", "Consolas", "Liberation Mono", monospace; }
    .box { fill: #f5f5f5; stroke: #ccc; stroke-width: 1; rx: 8; }
    .box-accent { fill: #f5f5f5; stroke: #009485; stroke-width: 1.5; rx: 8; }
    .connector { stroke: #9e9e9e; stroke-width: 1.2; fill: none; marker-end: url(#arrow-light); }
    .connector-return { stroke: #009485; stroke-width: 1.2; fill: none; marker-end: url(#arrow-light); stroke-dasharray: 5,3; }
    .heading { font-size: 13px; font-weight: 700; fill: #009485; }
    .zone-title { font-size: 9px; font-weight: 600; fill: #009485; text-transform: uppercase; letter-spacing: 0.05em; }
    .step-num { font-size: 9px; font-weight: 700; fill: #fff; }
    .step-circle { fill: #009485; }
    .divider { stroke: #009485; stroke-width: 1; opacity: 0.3; }

    @media (prefers-color-scheme: dark) {
      .title { fill: #e0e0e0; }
      .label { fill: #aaa; }
      .code { fill: #e0e0e0; }
      .code-muted { fill: #aaa; }
      .box { fill: rgba(255,255,255,0.07); stroke: rgba(255,255,255,0.15); }
      .box-accent { fill: rgba(255,255,255,0.07); stroke: #4db6ac; }
      .connector { stroke: #666; marker-end: url(#arrow-dark); }
      .connector-return { stroke: #4db6ac; marker-end: url(#arrow-dark); }
      .heading { fill: #4db6ac; }
      .zone-title { fill: #4db6ac; }
      .step-circle { fill: #4db6ac; }
      .divider { stroke: #4db6ac; }
    }
  </style>

  <!-- Heading -->
  <text x="375" y="22" text-anchor="middle" class="heading">DNS Zone Resolution Path</text>

  <!-- CLIENT box (left) -->
  <rect x="16" y="60" width="110" height="50" class="box-accent"/>
  <text x="71" y="80" text-anchor="middle" class="zone-title">Client</text>
  <text x="71" y="96" text-anchor="middle" class="code" style="font-size:9px;">www.example.com?</text>

  <!-- Step 1 arrow: Client to Resolver -->
  <line x1="126" y1="85" x2="155" y2="85" class="connector"/>
  <circle cx="141" cy="73" r="7" class="step-circle"/>
  <text x="141" y="76" text-anchor="middle" class="step-num">1</text>

  <!-- RESOLVER box (central, tall) -->
  <rect x="158" y="45" width="100" height="80" class="box-accent"/>
  <text x="208" y="65" text-anchor="middle" class="zone-title">Resolver</text>
  <text x="208" y="82" text-anchor="middle" class="label">Recursive</text>
  <text x="208" y="95" text-anchor="middle" class="label">lookup</text>

  <!-- Step 2 arrow: Resolver to Root Zone -->
  <line x1="258" y1="70" x2="295" y2="70" class="connector"/>
  <circle cx="277" cy="58" r="7" class="step-circle"/>
  <text x="277" y="61" text-anchor="middle" class="step-num">2</text>

  <!-- ROOT ZONE box -->
  <rect x="298" y="44" width="120" height="52" class="box"/>
  <text x="358" y="62" text-anchor="middle" class="zone-title">Root Zone (.)</text>
  <text x="358" y="78" text-anchor="middle" class="code-muted">NS for .com</text>
  <text x="358" y="90" text-anchor="middle" class="code" style="font-size:9px;">a.gtld-servers.net</text>

  <!-- Step 3 arrow: Resolver to .com Zone -->
  <path d="M258,85 L280,85 L280,165 L298,165" class="connector"/>
  <circle cx="277" cy="132" r="7" class="step-circle"/>
  <text x="277" y="135" text-anchor="middle" class="step-num">3</text>

  <!-- .COM ZONE box -->
  <rect x="298" y="140" width="140" height="52" class="box"/>
  <text x="368" y="158" text-anchor="middle" class="zone-title">.com Zone</text>
  <text x="368" y="174" text-anchor="middle" class="code-muted">NS for example.com</text>
  <text x="368" y="186" text-anchor="middle" class="code" style="font-size:9px;">ns1.example.com</text>

  <!-- Step 4 arrow: Resolver to example.com Zone -->
  <path d="M258,100 L270,100 L270,260 L298,260" class="connector"/>
  <circle cx="277" cy="215" r="7" class="step-circle"/>
  <text x="277" y="218" text-anchor="middle" class="step-num">4</text>

  <!-- EXAMPLE.COM ZONE box -->
  <rect x="298" y="222" width="200" height="76" class="box"/>
  <text x="398" y="240" text-anchor="middle" class="zone-title">example.com Zone</text>
  <text x="398" y="258" text-anchor="middle" class="code" style="font-size:9px;">www  CNAME  web.example.com.</text>
  <text x="398" y="274" text-anchor="middle" class="code" style="font-size:9px;">web  A      93.184.216.34</text>
  <text x="398" y="290" text-anchor="middle" class="code-muted">CNAME followed automatically</text>

  <!-- Step 5 label: CNAME follow -->
  <circle cx="520" cy="248" r="7" class="step-circle"/>
  <text x="520" y="251" text-anchor="middle" class="step-num">5</text>
  <path d="M510,260 C540,260 540,280 510,280 L500,280" class="connector" style="marker-end: none;"/>
  <text x="550" y="274" text-anchor="start" class="code-muted" style="font-size:9px;">Follow CNAME</text>
  <text x="550" y="286" text-anchor="start" class="code-muted" style="font-size:9px;">to A record</text>

  <!-- Step 6 arrow: Resolver returns to Client -->
  <path d="M158,105 L140,105 L140,155 L71,155 L71,110" class="connector-return"/>
  <circle cx="105" cy="143" r="7" class="step-circle"/>
  <text x="105" y="146" text-anchor="middle" class="step-num">6</text>

  <!-- Return result box below client -->
  <rect x="16" y="158" width="110" height="42" class="box"/>
  <text x="71" y="175" text-anchor="middle" class="zone-title">Response</text>
  <text x="71" y="191" text-anchor="middle" class="code" style="font-size:9px;">93.184.216.34</text>

  <!-- Bottom summary -->
  <line x1="16" y1="320" x2="734" y2="320" class="divider"/>
  <text x="375" y="340" text-anchor="middle" class="label" style="font-style: italic;">Each zone delegates to the next via NS records until the authoritative zone returns the final answer.</text>
</svg>
